const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/GridPage-BGWI2WYp.js","assets/vendor-react-DC-HNDk7.js","assets/vendor-CAzp3sNt.js","assets/vendor-styled-B90fjfj0.js","assets/DetailsPage-X4aq661v.js"])))=>i.map(i=>d[i]);
import{r as e,j as t,B as r,R as o,a as n,b as s,o as i}from"./vendor-react-DC-HNDk7.js";import"./vendor-CAzp3sNt.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const c={},a=function(e,t,r){let o=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),r=e?.nonce||e?.getAttribute("nonce");o=Promise.allSettled(t.map((e=>{if((e=function(e){return"/photo-grid-viewer/"+e}(e))in c)return;c[e]=!0;const t=e.endsWith(".css"),o=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${o}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script"),n.crossOrigin="",n.href=e,r&&n.setAttribute("nonce",r),document.head.appendChild(n),t?new Promise(((t,r)=>{n.addEventListener("load",t),n.addEventListener("error",(()=>r(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}function n(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return o.then((t=>{for(const e of t||[])"rejected"===e.status&&n(e.reason);return e().catch(n)}))},l="https://api.pexels.com/v1",d={},u=async e=>{const t=d[e],r=Date.now();if(t&&r-t.timestamp<36e5)return t.data;const o=await(async e=>{const t=await fetch(`${l}/photos/${e}`,{headers:{Authorization:"Swnocb0S4MOoHOCIJyVn9SvZQCSk4wFjTKq9r90bOkosAveBBnJrW1Qw"}});if(!t.ok)throw new Error("Failed to fetch photo details");return t.json()})(e);return d[e]={data:o,timestamp:r},o},h="picsart_photos_cache",p="picsart_photos_cache_expiry",f=e.createContext(void 0),m=({children:r})=>{const[o,n]=e.useState([]),[s,i]=e.useState(!0),[c,a]=e.useState(null),[d,u]=e.useState(!1),m=()=>{if((()=>{const e=localStorage.getItem(p);return!!e&&(new Date).getTime()<parseInt(e,10)})()){const t=localStorage.getItem(h);if(t)try{const e=JSON.parse(t);return n(e),i(!1),u(!0),!0}catch(e){}}return!1},g=async()=>{if(!(o.length>0&&d||m()))try{i(!0);const e=await(async(e=1,t=80)=>{const r=await fetch(`${l}/curated?page=${e}&per_page=${t}`,{headers:{Authorization:"Swnocb0S4MOoHOCIJyVn9SvZQCSk4wFjTKq9r90bOkosAveBBnJrW1Qw"}});if(!r.ok)throw new Error("Failed to fetch photos");return r.json()})();if(n(e.photos),(e=>{try{const t=JSON.stringify(e);if(t.length>4e6)return;localStorage.setItem(h,t);const r=(new Date).getTime()+6e5;localStorage.setItem(p,r.toString())}catch(t){}})(e.photos),e.photos.length>0){(new Image).src=e.photos[0].src.medium}a(null)}catch(e){a(e instanceof Error?e.message:"Failed to fetch photos")}finally{i(!1),u(!0)}};return e.useEffect((()=>{g()}),[]),t.jsx(f.Provider,{value:{photos:o,loading:s,error:c,refresh:g},children:r})},g=()=>{const t=e.useContext(f);if(void 0===t)throw new Error("usePhotos must be used within a PhotosProvider");return t},S=e.createContext(void 0),w=({children:r})=>{const[o,n]=e.useState(0);return t.jsx(S.Provider,{value:{gridScrollPosition:o,setGridScrollPosition:e=>{n(e)},resetScrollPosition:()=>{n(0)}},children:r})},y=()=>{const t=e.useContext(S);if(void 0===t)throw new Error("useScroll must be used within a ScrollProvider");return t},v=e.lazy((()=>a((()=>import("./GridPage-BGWI2WYp.js")),__vite__mapDeps([0,1,2,3])))),j=e.lazy((()=>a((()=>import("./DetailsPage-X4aq661v.js")),__vite__mapDeps([4,1,2,3]))));function x(){return t.jsx(r,{children:t.jsx(m,{children:t.jsx(w,{children:t.jsx(e.Suspense,{fallback:t.jsx("div",{children:"Loading..."}),children:t.jsxs(o,{children:[t.jsx(n,{path:"/",element:t.jsx(v,{})}),t.jsx(n,{path:"/photo/:id",element:t.jsx(j,{})})]})})})})})}s.createRoot(document.getElementById("root")).render(t.jsx(i.StrictMode,{children:t.jsx(x,{})}));export{g as a,u as g,y as u};
